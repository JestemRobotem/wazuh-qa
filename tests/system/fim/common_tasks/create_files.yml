---
- name: "Run script generate_files.py on agents | Linux"
  script: "generate_files.py -c {{ files_config_linux_destination_path }} -o {{ files_generated_output_path }}"
  args:
    chdir: "{{ agents_linux_output_path }}"
    executable: "python3"
  when:
    - inventory_hostname in groups['linuxagents']
  become: yes

- name: copy script
  win_copy:
    src: ../../common_tasks/generate_files.py
    dest: "{{ agents_windows_output_path }}/generate_files.py"

- name: "Run script generate_files.py on agents | Windows"
  win_shell: "python generate_files.py -c {{ files_config_windows_destination_path }} -o {{ files_generated_output_path }}"
  args:
    chdir: "{{ agents_windows_output_path }}"
  when:
    - inventory_hostname in groups['windowsagents']
