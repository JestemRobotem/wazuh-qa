---
  - name: Launching environments
    hosts: localhost
    serial: 25
    vars_files:
      - ./vars/credentials.yml
    tasks:
      - name: Obtaining date and time for logs files creation
        set_fact:
          current_date_time: "{{ ansible_date_time.date }}_{{ ansible_date_time.hour }}_{{ansible_date_time.minute }}"

      - name: Creating folder to store logs if not already present
        file:
          path: "./deployment_logs/log_{{ current_date_time }}"
          state: directory
        register: path_created

      - name: Creating logs files
        file:
          path: "./deployment_logs/log_{{ current_date_time }}/{{ item }}"
          state: touch
        with_items:
          - deploy.log
          - elasticsearch_bootstrap.log
          - elasticsearch.log
          - masters.log
          - workers.log
          - kibana.log
          - linux_agents.log
          - windows_agents.log
          - post_installation.log
          - use_cases_install.log
          - use_cases_actions.log
          - use_cases_tests.log
