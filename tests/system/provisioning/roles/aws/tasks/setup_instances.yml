---
  - name: Unlock python-apt package on Debian's families instances
    shell: "apt-mark unhold python-apt"
    when:
      - inventory_hostname in groups['linuxagents']
      - ansible_os_family == "Debian"

  - name: Install DNF package manager inside old RedHat's
    command: yum install -y dnf
    when:
      - inventory_hostname in groups['linuxagents']
      - ansible_os_family == "RedHat"
      - ansible_distribution_major_version < "8"

  - name: Install selinux python on RedHat's families instances
    dnf:
      name: libselinux-python
      state: present
    when:
      - inventory_hostname in groups['linuxagents']
      - ansible_os_family == "RedHat"
      - ansible_distribution_major_version < "8"

  - name: Configuring Windows Agents
    block:
      - name: Installing Google Chrome
        win_chocolatey:
          name: googlechrome
          version: 79.0.3945.130
          pinned: yes
          state: present
          ignore_checksums: yes
    when:
      - ansible_os_family == "Windows"
